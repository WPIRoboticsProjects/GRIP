#**
This creates the complete java pipeline.
*##set($needsRefClass = false)
#set($lines = false)
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import java.util.stream.Collectors;
import java.util.HashMap;

import org.opencv.core.*;
import org.opencv.core.Core.*;
import org.opencv.features2d.FeatureDetector;
import org.opencv.imgcodecs.Imgcodecs;
import org.opencv.imgproc.*;

/**
* $fileName class.
*
* <P>Autogenerated pipeline from GRIP.
*
* <P>Make sure to set all sources using the setters before running process().
*
* @author GRIP
*/
public class $fileName {

	//Outputs
#foreach($step in $pipeline.getSteps())
#foreach($out in $step.getOutputs())
	private #socketType(${out.type()}) ${tMeth.name($out.name())}#if(!$out.mutable()) = new #socketType(${out.type()})()#end;
#end
#end

	//Sources
#foreach($source in $pipeline.getSources())
	private #socketType(${source.type()}) $source.value();
#end
#if($pipeline.getMovingThresholds().size() gt 0)

	//Moving Thresholds
#end
#foreach($moving in $pipeline.getMovingThresholds())
    private Mat lastImage$moving.num() = new Mat();
#end
#foreach($step in $pipeline.getSteps())
#if($step.name() == "Switch" || $step.name() == "Valve")
#set($boolInp = $step.getInput(0))
#set($boolName = "$tMeth.name($boolInp.name())")
	private boolean $boolName#if($boolInp.hasValue()) = $boolInp.value()#end;
#end
#end
#if(!$testing)
	static{
		System.loadLibrary(Core.NATIVE_LIBRARY_NAME);
	}
#end

	/**
	 * This constructor sets up the pipeline
	 */
	public $fileName() {
	}

	/**
	 * This is the primary method that runs the entire pipeline and updates the outputs.
	 */
	public void process() {
#foreach($step in $pipeline.getSteps())
		//Step  $step.name()$step.num():
#parse("$vmLoc/CV Step.vm")

#end
	}

#foreach($source in $pipeline.getSources())
	/**
	 * This method is a generated setter for $source.value().
	 * @param source the #socketType($source.type()) to set
	 */
	public void set${source.value()}(#socketType(${source.type()}) ${source.value()}) {
		this.$source.value() = ${source.value()};
	}

#end
#foreach($step in $pipeline.getSteps())
#if($step.name() == "Switch" || $step.name() == "Valve")
#set($boolInp = $step.getInput(0))
#set($boolName = "$tMeth.name($boolInp.name())")
#if($boolInp.hasValue())
	/**
	 * This method is a generated setter for the condition of $step.name()
	 * @param the condition to set
	 */
	 public void set$tMeth.name($step.name())$step.num()(boolean value) {
	 	$boolName = value;
	 }

#end
#end
#end
#foreach($step in $pipeline.getSteps())
#foreach($output in $step.getOutputs())
	/**
	 * This method is a generated getter for the output of a $step.name().
	 * @return #socketType(${output.baseType()}) output from $step.name().
	 */
	public #socketType(${output.baseType()}) ${tMeth.getterName($output.name())}() {
		return ${tMeth.name($output.name())};
	}

#end
#end

#foreach($step in $pipeline.getUniqueSteps())
#set($toParse = "$vmLoc/operations/" + $step.name())
#set($toParse = $toParse + ".vm")
#parse($toParse)


#end

#if($needsRefClass)
#parse("$vmLoc/Ref.vm")
#end


}
